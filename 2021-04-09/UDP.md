## 从系统层面上，UDP如何保证尽量可靠？

在传输层里面，UDP协议的传输可靠性方面不如TCP，如果从系统层面进行提升的话，可以考虑参考TCP协议的一些特性  
去实现。  
总体来说必须实现以下功能：
* 发送: 包的分片、包确认、包的重发
* 接受: 包的调序、包的序号确认

* 最简单的方式是在应用层模仿传输层TCP的可靠性传输：
    * 添加seq/ack机制，确保数据发送到对端
    * 添加发送和接收缓冲区，主要是用户超时重传
    * 添加超时重传机制
   发送端发送数据的时候，生成一个随机seq=x，然后每一片按照数据大小分配seq。数据到达接收端后  
      接收端放入到缓存，并发送一个ack=x的包，表示对方已经收到了数据。发送端收到了ack包之后，删除  
      缓冲区对应的数据  
   时间到后，定时任务检查是否需要重传数据
