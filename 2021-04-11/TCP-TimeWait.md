## 简述 TCP 的 TIME_WAIT

* 主动关闭方在收到被动关闭方的FIN包后，并返回ACK后，会进入TIME_WAIT状态，TIME_WAIT状态又被称作2MSL  
状态，每个TCP连接都必须有一个最大报文段生存时间MSL。在网络传输中超过这个时间的报文段将被丢弃。当TCP连接发起  
一个主动关闭，并发出最后一个ACK时，必须在TIME_WAIT状态停留两倍MSL时间，在2MSL等待期间，定义这个连接的端口  
将不能再被使用。2MSL状态的存在有两个理由：
  * 1.允许老的重复报文分组在网络中消逝
  * 2.保证TCP全双工连接的正确关闭

如果主动方最终发送给被动方的ACK丢失的话，那么服务器（被动方）就会重新发送那个FIN，以允许主动关闭方重新发送那  
个ACK。要是主动关闭方不维护2MSL状态，那么主动关闭将会不得不响应一个RST报文段，而服务器将会把它解释为一个错误，  
导致TCP连接没有办法完成全双工的关闭，而进入半关闭状态。  
    ![avatar](./../PIC/TIME_WAIT.jpg)
