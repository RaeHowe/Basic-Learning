## TCP 四次挥手的时候 CLOSE_WAIT 的话怎么处理？

* CLOSE_WAIT是接收方在挥手过程中的一个状态。这个状态理论上应该很快消失，如果一直保持在CLOSE_WAIT状态的话，那么只有一种情况，  
  就是在对方关闭连接之后服务器程序自己没有进一步发出ACK信号。

* 解决方法
  * 出现大量CLOSE_WAIT的现象，主要原因是某种情况下对方关闭了socket连接，但是我方忙于读或者写，没有关闭连接。没有及时关闭连接原因如下:
    * 例如I/O线程被意外阻塞，或者I/O线程执行的用户自定义Task比例过高，导致I/O操作处理不及时，链路不能被及时释放。
    * 使用了某些资源却忘记close释放。比如HttpClient4请求中忘记调用InputStream.close()来确认连接关闭，或者数据库连接池使  
      用完了忘记释放都有可能导致。

