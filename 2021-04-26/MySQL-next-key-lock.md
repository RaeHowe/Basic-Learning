## 简述 MySQL 的间隙锁

* MySQl的间隙锁，是在RR隔离级别下，为了防止幻读而设计的方案。

* 个人理解
  * 间隙锁的采用，解决了在RR隔离级别下，幻读产生的问题。间隙锁会加在索引记录之间，或者第一个索引  
    记录之前，或者最后一个索引记录之后。InnoDB通过采用间隙锁的方式，来解决了条件查询情况下，查询  
    出来的结果集不一致的问题。

  * 对于InnoDB的RR隔离级别来说，针对于快照读和当前读的幻读防止策略，分别采用了不同的处理方式
    * 快照读
      * 采用MVCC的技术来保证了InnoDB的可重复读，而且可以防止幻读。但是该种方式防止的是快照读，也就  
        是说读取的数据虽然是一致的，但是数据是历史数据。
    * 当前读
      * 采用Next-key lock（也就是行锁与间隙锁的结合）的方式来避免了RR隔离级别下，针对于当前读  
        的场景下幻读的发生。

  * 总结这部分内容来说，InnoDB在RR隔离级别下，快照读是通过MVCC和undo log来实现的；当前读是通过
    加record lock和gap lock来实现的。
